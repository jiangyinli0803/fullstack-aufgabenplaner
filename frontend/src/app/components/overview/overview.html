
<div class="w-full bg-white rounded-2xl grid grid-cols-1 lg:grid-cols-[300px_1fr] gap-5 mb-6">

     <!-- Kalender -->     
          <div class="bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl p-5 w-80">
            <div class="flex items-center justify-between mb-4">
              <button (click)="previousMonth()" class="transition-transform duration-200 hover:scale-125">
                <img src="/img/icon-left-30.png" alt="previous monat" width="30" height="30">
              </button>
              <h2 class="text-2xl font-bold text-gray-800">{{ currentMonth }} {{ currentYear }}</h2>
              <button (click)="nextMonth()" class="transition-transform duration-200 hover:scale-125">
                <img src="/img/icon-right-30.png" alt="next monat" width="30" height="30">
              </button>
            </div>
            <div class="grid grid-cols-7 gap-2">
              <!-- Wochentage -->
              <div *ngFor="let day of ['Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa', 'So']" 
                   class="text-center text-sm font-semibold text-gray-600 py-2">
                {{ day }}
              </div>
              <!-- Kalendertage -->
              <div *ngFor="let date of calendarDays" 
                   (click)="onSelectDay(date)"
                   [class]="'text-center py-2 rounded-lg hover:bg-indigo-100 cursor-pointer transition-all ' + 
                            (isToday(date) ? 'bg-indigo-600 text-white font-bold shadow-lg' : 
                             isCurrentMonth(date) ? 'bg-white text-gray-800' : 
                             'text-gray-400')">
                {{ date.getDate() }}
              </div>
            </div>
          </div>
    

     <!-- Gantt Chart -->
   
        <div class="bg-white rounded-2xl shadow-xl p-6 overflow-x-auto">
          
          <!-- Navigation + Header -->
          <div class="mb-6">
             <!-- 导航按钮行 -->
            <div class="flex items-center justify-between mb-4 px-2">
              <button (click)="scrollBackward(7)" 
                      class="p-2 rounded-lg hover:bg-gray-100 transition-all duration-200 hover:scale-110 active:scale-95">
                <img src="/img/icon-left-30.png" alt="Vorherige Woche" width="30" height="30">
              </button>
              
              <div class="text-sm font-medium text-gray-600">
                {{ timelineDays[0]?.date }} - {{ timelineDays[timelineDays.length - 1]?.date }}
              </div>
              
              <button (click)="scrollForward(7)" 
                      class="p-2 rounded-lg hover:bg-gray-100 transition-all duration-200 hover:scale-110 active:scale-95">
                <img src="/img/icon-right-30.png" alt="Nächste Woche" width="30" height="30">
              </button>
            </div>
            
            <!-- Header mit Tagen -->
            <div class="grid gap-2 px-2" style="grid-template-columns: 220px repeat(10, 1fr);">
            <!-- 空白占位 (对齐员工列) -->
            <div></div>
            
            <!-- 日期列 添加右边框-->
            <div *ngFor="let day of timelineDays" 
                class="text-center p-2 cursor-pointer hover:bg-indigo-50 transition-colors border-r border-gray-300"
                [class.bg-indigo-100]="isToday(day.fullDate)">
              <div class="text-xs font-semibold" 
                  [class.text-indigo-600]="isToday(day.fullDate)"
                  [class.text-gray-600]="!isToday(day.fullDate)">
                {{ day.weekday }}
              </div>
              <div class="text-xs" 
                  [class.text-indigo-500]="isToday(day.fullDate)"
                  [class.text-gray-500]="!isToday(day.fullDate)">
                {{ day.date }}
              </div>
            </div>
            </div>
          </div>  <!-- Navigation + Header Ende--> 

        

       <!-- Employee + task Rows -->
  <div class="space-y-2">
    <div *ngFor="let employee of employees$ | async" 
         class="border-b last:border-b-0 pb-3"> <!-- Employee 分隔线 -->
      
      <div class="grid gap-2 items-center" 
           style="grid-template-columns: 220px repeat(10, 1fr);" > <!-- 左边220px 右边10列 -->
      
        
        <!-- 员工信息列 (固定 220px) -->
        <div class="flex items-center gap-3 px-2">
          <div class="w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0">
            <span class="text-indigo-600 font-bold text-sm">{{ getInitials(employee.firstname) }}</span>
          </div>
          <div class="font-medium text-gray-800 text-sm truncate">
            {{ employee.lastname }}
          </div>
        </div>

        <!-- 任务时间轴 (10 列) -->
        <div class="col-span-10 relative min-h-[48px] py-1"
             style="display: grid; grid-template-columns: repeat(10, 1fr); gap: 0;">
          
          <!-- 任务条 -->
          <div *ngFor="let task of getEmployeeTasksForGrid(employee.id)"
               [style.grid-column-start]="task.gridColumnStart"
               [style.grid-column-end]="'span ' + task.gridColumnSpan"               
               [ngClass]="task.status_color"
               class="rounded-lg px-3 py-2 text-xs font-medium text-white shadow-sm hover:shadow-md transition-all cursor-pointer relative overflow-hidden"
               [title]="task.title + ' (' + task.start_date + ' - ' + task.end_date + ')'">
            
            <!-- 左侧截断指示 -->
          <span *ngIf="task.isTruncatedLeft" 
                class="absolute left-0 top-0 bottom-0 w-1 bg-white/50 rounded-l-lg">
            <span class="absolute left-0 top-1/2 -translate-y-1/2 text-white text-xs">◀</span>
          </span>           
            
            <!-- 任务名称 -->
            <div class="truncate font-semibold">{{ task.title }}</div>
            
            <!-- 右侧截断指示 -->
            <span *ngIf="task.isTruncatedRight" 
                  class="absolute right-0 top-0 bottom-0 w-1 bg-white/50 rounded-r-lg">
              <span class="absolute right-0 top-1/2 -translate-y-1/2 text-white text-xs">▶</span>
            </span>
           
          </div>

        </div>
      </div>
    </div>
  </div>
    </div>



</div>


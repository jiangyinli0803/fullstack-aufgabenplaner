<!-- Neue Aufgabe hinzufügen -->
<div class="bg-gray-50 rounded-xl p-4">
  <h2 class="text-2xl font-bold text-gray-700 my-4">Neue Aufgabe erstellen</h2>
  
  <form [formGroup]="taskForm" (ngSubmit)="onSubmit()">    
   
    
    <!-- Aufgabenname -->
    <div class="mb-4">
      <label class="block text-gray-700 font-semibold mb-2">
        Aufgabentitel *
      </label>
      <input
        type="text"
        formControlName="title"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-400"
        placeholder="z.B. Projekt Marketing Q1"
      />
      <div *ngIf="taskForm.get('title')?.invalid && taskForm.get('title')?.touched" 
           class="text-red-500 text-sm mt-1">
        Name ist erforderlich (mindestens 3 Zeichen)
      </div>
    </div>

    <!-- Beschreibung -->
    <div class="mb-4">
      <label for="description" class="block font-medium">Beschreibung</label>
      <textarea id="description" formControlName="description" rows="3" 
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-400" 
        placeholder="Kurze Beschreibung der Aufgabe..."></textarea>
      <div *ngIf="taskForm.get('description')?.touched && taskForm.get('description')?.invalid" class="text-red-500 text-sm mt-1">
        Die Beschreibung muss mindestens 10 Zeichen enthalten.
      </div>
    </div>

     <!-- Mitarbeiter hinzufügen -->
    <div class="mb-4">
      <label for="employee" class="block text-gray-700 font-semibold mb-2">Mitarbeiter</label>
      <select
        id="employee"
        formControlName="employeeId"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
      >
         <option *ngFor="let employee of employees" [ngValue]="employee.id">
          {{ employee.full_name }} - {{ employee.department }}
        </option>
      </select>
    </div>  

    <!-- Status -->
    <div class="mb-4">
      <label class="block text-gray-700 font-semibold mb-2">
        Status *
      </label>
      <select
        formControlName="status"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
      >
        <option *ngFor="let status of statusOptions" [value]="status.value">
          {{ status.label }}
        </option>
      </select>
    </div>

    <!-- Startdatum -->
    <div class="mb-4">
      <label class="block text-gray-700 font-semibold mb-2">
        Startdatum *
      </label>
      <input
        type="date"
        formControlName="startDate"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      <div *ngIf="taskForm.get('startDate')?.invalid && taskForm.get('startDate')?.touched" 
           class="text-red-500 text-sm mt-1">
        Startdatum ist erforderlich
      </div>
    </div>

    <!-- Enddatum -->
    <div class="mb-4">
      <label class="block text-gray-700 font-semibold mb-2">
        Enddatum *
      </label>
      <input
        type="date"
        formControlName="endDate"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      <div *ngIf="taskForm.get('endDate')?.invalid && taskForm.get('endDate')?.touched" 
           class="text-red-500 text-sm mt-1">
        Enddatum ist erforderlich
      </div>
    </div>
         <!-- ✅ 日期范围错误提示 -->
    <div *ngIf="dateRangeError" class="text-red-500 text-sm mt-1">
      ⚠️ Enddatum muss nach dem Startdatum liegen
    </div>
    
           
    <!-- Buttons -->
    <div class="flex gap-4 mt-6">
      <button
        type="submit"
        [disabled]="taskForm.invalid"
        class="flex-1 px-6 py-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold rounded-lg transition"
      >
        Aufgabe erstellen
      </button>
      <button
        type="button"
        (click)="onCancel()"
        class="flex-1 px-6 py-3 bg-gray-300 hover:bg-gray-400 text-gray-700 font-semibold rounded-lg transition"
      >
        Abbrechen
      </button>
    </div>
  </form>
</div>